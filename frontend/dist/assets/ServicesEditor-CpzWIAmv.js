import{z as v,r,A as u,j as e,M as X,S as Z,B as ee,I as k,U as O,E as g,L as $,G as _,T as I,H as D,J as se,Q as B,N as W,aw as Y,O as J,P as re}from"./index-CBHbDdlb.js";const{TextArea:ie}=k,oe=({isOpen:b,onClose:j})=>{const[m]=v.useForm(),[U,y]=r.useState(!1),[L,w]=r.useState(!1),[x,f]=r.useState(!1);r.useEffect(()=>{b&&!x&&(N(),f(!0))},[b,x]);const N=async()=>{try{y(!0);const n=await fetch("http://localhost:8000/api/service-description/");if(!n.ok){if(n.status===404){p();return}throw new Error("Failed to fetch description data")}const c=await n.json();c?(m.setFieldsValue({title:c.title||"",description:c.description||""}),c.logo&&m.setFieldsValue({logo:c.logo})):p()}catch(i){console.error("Error fetching description data:",i),u.error("Failed to load description data. Using default values."),p()}finally{y(!1)}},p=()=>{m.setFieldsValue({title:"The Latest News and Events on Stech Group Business Concerns",description:"Our Latest News and Events on Stech Group are highlighted here to showcase the updates from its diverse business concerns. It highlights key milestones, recent achievements, community initiatives, and industry events involving Stech Group's ventures, such as JG Healthcare, JG Alfalah, Stech Holidays, and others. This section keeps stakeholders informed and engaged while reflecting the group's commitment to transparency, innovation, and progress. Stay connected to explore how Stech Group continues to shape industries and communities locally and internationally.",logo:""})},R=async i=>{const n=new FormData;n.append("image",i),n.append("category","news_events");try{w(!0);const h=await fetch("http://localhost:8000/api/images/",{method:"POST",body:n});if(!h.ok)throw new Error("Upload failed");const E=`${(await h.json()).image}`;return m.setFieldsValue({logo:E}),E}catch(c){return console.error("Upload error:",c),u.error("Image upload failed"),null}finally{w(!1)}},T={name:"logo",showUploadList:!1,customRequest:async({file:i,onSuccess:n,onError:c})=>{const h=await R(i);h?n(h,i):c(new Error("Upload failed"))},beforeUpload:i=>{const n=i.type.startsWith("image/");if(!n)return u.error("You can only upload image files!"),O.LIST_IGNORE;const c=i.size/1024/1024<5;return c?n&&c:(u.error("Image must be smaller than 5MB!"),O.LIST_IGNORE)}},P=async()=>{try{const i=await m.validateFields(),n={title:i.title,description:i.description,logo:i.logo||""},h=await fetch("http://localhost:8000/api/service-description/",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!h.ok){const A=await h.json();throw new Error(A.message||"Failed to save description data")}_.fire({position:"top-end",icon:"success",title:"Description Updated Successfully",showConfirmButton:!1,timer:3e3}),j()}catch(i){console.error("Error saving description data:",i),u.error(i.message||"Failed to update description")}};return e.jsx(X,{title:e.jsx("span",{className:"text-xl font-bold text-gray-800",children:"Edit News & Events Description"}),open:b,onCancel:j,footer:[e.jsx(g,{onClick:j,className:"px-6 h-10 rounded-lg border-gray-300 hover:bg-gray-100",children:"Cancel"},"back"),e.jsx(g,{type:"primary",onClick:P,loading:U,className:"px-6 h-10 rounded-lg bg-blue-600 hover:bg-blue-700",children:"Save Changes"},"submit")],width:800,className:"rounded-lg overflow-hidden",styles:{body:{padding:"24px"}},destroyOnClose:!0,children:e.jsx(Z,{spinning:U,children:e.jsx(v,{form:m,layout:"vertical",className:"space-y-6",children:e.jsx(ee,{title:"Main Content",bordered:!1,className:"rounded-lg shadow-sm border-0",headStyle:{background:"linear-gradient(90deg, #f8f9fa 0%, #ffffff 100%)",borderBottom:"1px solid #e8e8e8"},children:e.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[e.jsx(v.Item,{name:"title",label:e.jsx("span",{className:"font-medium text-gray-700",children:"Section Title"}),rules:[{required:!0,message:"Please enter the title"}],children:e.jsx(k,{size:"large",placeholder:"e.g., The Latest News and Events",className:"rounded-lg hover:border-blue-400 focus:border-blue-400"})}),e.jsx(v.Item,{name:"description",label:e.jsx("span",{className:"font-medium text-gray-700",children:"Description"}),rules:[{required:!0,message:"Please enter the description"}],children:e.jsx(ie,{rows:6,placeholder:"Description about the news and events section",className:"rounded-lg hover:border-blue-400 focus:border-blue-400"})}),e.jsx(v.Item,{name:"logo",label:e.jsx("span",{className:"font-medium text-gray-700",children:"Section Logo"}),children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(O,{...T,children:e.jsx(g,{icon:e.jsx($,{}),loading:L,className:"h-10 rounded-lg bg-blue-600 hover:bg-blue-700 text-white",children:"Upload Logo"})}),m.getFieldValue("logo")&&e.jsx("div",{className:"relative w-16 h-16",children:e.jsx("img",{src:m.getFieldValue("logo"),alt:"Section logo",className:"w-full h-full object-contain"})})]})})]})})})})})},{TextArea:K}=k,{Panel:Q}=se,le=({isOpen:b,onClose:j})=>{const[m]=v.useForm(),[U,y]=r.useState(!1),[L,w]=r.useState(!1),[x,f]=r.useState([]),[N,p]=r.useState([]),[R,T]=r.useState(!1),[P,i]=r.useState(["1","2"]),n="http://localhost:8000/api";r.useEffect(()=>{b&&c()},[b]);const c=async()=>{try{y(!0);const s=await fetch(`${n}/service-model/`);if(!s.ok){if(s.status===404){h();return}throw new Error("Failed to fetch services data")}const o=(await s.json()).services_section||{};m.setFieldsValue({title:o.title||"",text:o.text||""}),f((o.principles||[]).map(a=>({...a,id:a.id||Date.now()+Math.random()}))),p((o.service_categories||[]).map(a=>({...a,id:a.id||Date.now()+Math.random()}))),T(!0)}catch(s){console.error("Error fetching services data:",s),u.error("Failed to load services data. Using default values."),h()}finally{y(!1)}},h=()=>{m.setFieldsValue({title:"Our Services",text:"At Stech Group, we offer a wide range of innovative services across the industries we serve..."}),f([]),p([]),T(!0)},A=async(s,t,o=!0)=>{const a=new FormData;a.append("image",s),a.append("category",o?"principles":"service_categories");try{w(!0);const l=await fetch(`${n}/images/`,{method:"POST",body:a});if(!l.ok)throw new Error("Upload failed");const S=`${(await l.json()).image}`;return o?f(G=>G.map(C=>C.id===t?{...C,image:S}:C)):p(G=>G.map(C=>C.id===t?{...C,logo:S}:C)),u.success("Image uploaded successfully!"),S}catch(l){return console.error("Upload error:",l),u.error("Image upload failed"),null}finally{w(!1)}},E=(s,t=!0)=>({name:t?"principle_image":"service_logo",showUploadList:!1,customRequest:async({file:o,onSuccess:a,onError:l})=>{const d=await A(o,s,t);d?a(d,o):l(new Error("Upload failed"))},beforeUpload:o=>{const a=o.type.startsWith("image/");if(!a)return u.error("You can only upload image files!"),O.LIST_IGNORE;const l=o.size/1024/1024<5;return l?a&&l:(u.error("Image must be smaller than 5MB!"),O.LIST_IGNORE)}}),V=()=>{const s={id:Date.now()+Math.random(),primary_text:"",description:"",image:""};f(t=>[...t,s]),i(["1",...P])},q=s=>{_.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(t=>{t.isConfirmed&&(f(o=>o.filter(a=>a.id!==s)),u.success("Principle removed successfully"))})},z=(s,t,o)=>{f(a=>a.map(l=>l.id===s?{...l,[t]:o}:l))},H=()=>{const s={id:Date.now()+Math.random(),title:"",text:"",logo:""};p(t=>[...t,s]),i(["2",...P])},M=s=>{_.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(t=>{t.isConfirmed&&(p(o=>o.filter(a=>a.id!==s)),u.success("Service category removed successfully"))})},F=(s,t,o)=>{p(a=>a.map(l=>l.id===s?{...l,[t]:o}:l))},te=async()=>{try{const s=await m.validateFields();if(x.filter(d=>!d.primary_text||!d.description||!d.image).length>0)throw new Error("Please complete all principle fields or remove incomplete principles");if(N.filter(d=>!d.title||!d.text||!d.logo).length>0)throw new Error("Please complete all service category fields or remove incomplete categories");const a={services_section:{title:s.title,text:s.text,principles:x.map(({id:d,...S})=>S),service_categories:N.map(({id:d,...S})=>S)}};y(!0);const l=await fetch(`${n}/service-model/`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!l.ok){const d=await l.json();throw new Error(d.message||"Failed to save services data")}_.fire({position:"top-end",icon:"success",title:"Services Content Updated Successfully",showConfirmButton:!1,timer:3e3}),j()}catch(s){console.error("Error saving services data:",s),u.error(s.message||"Failed to update services section")}finally{y(!1)}},ae=s=>{i(s)};return e.jsx(X,{title:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-xl font-bold text-gray-800",children:"Edit Services Section"}),e.jsx(I,{title:"This section displays your company's services and guiding principles",children:e.jsx(re,{className:"ml-2 text-blue-500"})})]}),open:b,onCancel:j,footer:[e.jsx(g,{onClick:j,className:"px-6 h-10 rounded-lg border-gray-300 hover:bg-gray-100",children:"Cancel"},"back"),e.jsx(g,{type:"primary",onClick:te,loading:U,className:"px-6 h-10 rounded-lg bg-blue-600 hover:bg-blue-700",children:"Save Changes"},"submit")],width:1e3,className:"rounded-lg overflow-hidden",styles:{body:{padding:"24px"}},destroyOnClose:!0,children:e.jsx(Z,{spinning:U,tip:"Loading service data...",children:e.jsxs(v,{form:m,layout:"vertical",className:"space-y-6",children:[e.jsx(ee,{title:"Main Content",bordered:!1,className:"rounded-lg shadow-sm border-0",headStyle:{background:"linear-gradient(90deg, #f8f9fa 0%, #ffffff 100%)",borderBottom:"1px solid #e8e8e8"},children:e.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[e.jsx(v.Item,{name:"title",label:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Section Title"}),e.jsx(I,{title:"This will be the main heading for the Services section",children:e.jsx(D,{className:"ml-2 text-gray-400"})})]}),rules:[{required:!0,message:"Please enter the title"}],children:e.jsx(k,{size:"large",placeholder:"e.g., Our Services",className:"rounded-lg hover:border-blue-400 focus:border-blue-400"})}),e.jsx(v.Item,{name:"text",label:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Description"}),e.jsx(I,{title:"This introductory text appears below the section title",children:e.jsx(D,{className:"ml-2 text-gray-400"})})]}),rules:[{required:!0,message:"Please enter the description"}],children:e.jsx(K,{rows:4,placeholder:"Description about the services section",className:"rounded-lg hover:border-blue-400 focus:border-blue-400"})})]})}),e.jsxs(se,{activeKey:P,onChange:ae,className:"bg-white rounded-lg shadow-sm",expandIconPosition:"end",children:[e.jsx(Q,{header:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium",children:"Our Principles"}),e.jsx(I,{title:"Add your company's guiding principles with images",children:e.jsx(D,{className:"ml-2 text-gray-400"})})]}),extra:e.jsx(g,{type:"primary",icon:e.jsx(J,{}),onClick:V,size:"small",className:"flex items-center bg-blue-600 hover:bg-blue-700",children:"Add Principle"}),children:x.length===0?e.jsx("div",{className:"text-center py-4 text-gray-500",children:'No principles added yet. Click "Add Principle" to get started.'}):e.jsx(B,{dataSource:x,renderItem:s=>e.jsx(B.Item,{className:"p-4 mb-4 border border-gray-200 rounded-lg",children:e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex justify-between items-start gap-4",children:[e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Principle Title*"}),e.jsx(k,{value:s.primary_text,onChange:t=>z(s.id,"primary_text",t.target.value),placeholder:"e.g., Innovation",className:"rounded-lg hover:border-blue-400 focus:border-blue-400"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description*"}),e.jsx(K,{value:s.description,onChange:t=>z(s.id,"description",t.target.value),placeholder:"Detailed description of the principle...",rows:3,className:"rounded-lg hover:border-blue-400 focus:border-blue-400"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Image*",e.jsx(I,{title:"Recommended size: 600x400px",children:e.jsx(D,{className:"ml-1 text-gray-400"})})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(O,{...E(s.id,!0),children:e.jsx(g,{icon:e.jsx($,{}),loading:L,className:"h-10 rounded-lg bg-blue-600 hover:bg-blue-700 text-white",children:s.image?"Change Image":"Upload Image"})}),s.image&&e.jsxs("div",{className:"relative group w-32 h-24",children:[e.jsx("img",{src:s.image,alt:"Principle",className:"w-full h-full object-cover rounded-lg"}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity rounded-lg",children:e.jsx("span",{className:"text-white text-xs text-center p-1",children:"Click 'Change Image' to update"})})]})]})]})]}),e.jsx(g,{danger:!0,type:"text",icon:e.jsx(W,{}),onClick:()=>q(s.id),className:"ml-2"})]}),(!s.primary_text||!s.description||!s.image)&&e.jsx(Y,{message:"Complete all fields for this principle",type:"warning",showIcon:!0,className:"mt-3"})]})},s.id)})},"1"),e.jsx(Q,{header:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium",children:"Service Categories"}),e.jsx(I,{title:"Add different service categories your company offers",children:e.jsx(D,{className:"ml-2 text-gray-400"})})]}),extra:e.jsx(g,{type:"primary",icon:e.jsx(J,{}),onClick:H,size:"small",className:"flex items-center bg-blue-600 hover:bg-blue-700",children:"Add Category"}),children:N.length===0?e.jsx("div",{className:"text-center py-4 text-gray-500",children:'No service categories added yet. Click "Add Category" to get started.'}):e.jsx(B,{dataSource:N,renderItem:s=>e.jsx(B.Item,{className:"p-4 mb-4 border border-gray-200 rounded-lg",children:e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex justify-between items-start gap-4",children:[e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category Title*"}),e.jsx(k,{value:s.title,onChange:t=>F(s.id,"title",t.target.value),placeholder:"e.g., IT Services",className:"rounded-lg hover:border-blue-400 focus:border-blue-400"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description*"}),e.jsx(k,{value:s.text,onChange:t=>F(s.id,"text",t.target.value),placeholder:"Brief description of the service category...",className:"rounded-lg hover:border-blue-400 focus:border-blue-400"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Logo*",e.jsx(I,{title:"Recommended size: 200x200px with transparent background",children:e.jsx(D,{className:"ml-1 text-gray-400"})})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(O,{...E(s.id,!1),children:e.jsx(g,{icon:e.jsx($,{}),loading:L,className:"h-10 rounded-lg bg-blue-600 hover:bg-blue-700 text-white",children:s.logo?"Change Logo":"Upload Logo"})}),s.logo&&e.jsxs("div",{className:"relative group w-16 h-16",children:[e.jsx("img",{src:s.logo,alt:"Service category",className:"w-full h-full object-contain"}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity rounded",children:e.jsx("span",{className:"text-white text-xs text-center p-1",children:"Click 'Change Logo' to update"})})]})]})]})]}),e.jsx(g,{danger:!0,type:"text",icon:e.jsx(W,{}),onClick:()=>M(s.id),className:"ml-2"})]}),(!s.title||!s.text||!s.logo)&&e.jsx(Y,{message:"Complete all fields for this category",type:"warning",showIcon:!0,className:"mt-3"})]})},s.id)})},"2")]})]})})})},ce=({getDivider:b,availableShapes:j})=>{const[m,U]=r.useState(!1),[y,L]=r.useState(!1),[w,x]=r.useState(!1),[f,N]=r.useState(!1),[p,R]=r.useState(!1),[T,P]=r.useState(!1),[i,n]=r.useState(!1),[c,h]=r.useState(!1),[A,E]=r.useState(!1),[V,q]=r.useState(!1),[z,H]=r.useState(!1),[M,F]=r.useState(!1);return e.jsxs("div",{className:"flex gap-40 items-start justify-between p-20 w-[1300px]",children:[e.jsx("div",{className:"grid grid-cols-2 gap-28 font-bold text-center",children:e.jsx("button",{className:"btn btn-primary w-20 m-2",onClick:()=>F(!0),children:"Services"})}),e.jsx("div",{className:"mockup-browser bg-white border-8 border-black p-2 h-[1000px] overflow-y-scroll",children:e.jsxs("div",{children:[e.jsx("div",{className:"mockup-browser-toolbar m-10",children:e.jsx("div",{className:"input",children:"https://sample-website.com"})}),e.jsx("div",{className:"overflow-scroll"})]})}),e.jsx(oe,{isOpen:w,onClose:()=>x(!1)}),e.jsx(le,{isOpen:M,onClose:()=>F(!1)})]})};export{ce as default};
//# sourceMappingURL=ServicesEditor-CpzWIAmv.js.map
